<title-bar back-path="/plans/{{main.plan.id}}/list"></title-bar>

<menu></menu>

<div class="bar bar-standard bar-footer">
	<a class="icon icon-plus pull-right" ng-click="main.addItem()"></a>
</div>

<div class="content" scrolling>
	<div class="content-padded">
		<h1>Edit Shopping List</h1>
	</div>

	<form ng-submit="main.save()">
		<ul class="table-view">
			<li id="item_{{$index}}" class="table-view-cell full-width" ng-repeat="item in main.visibleItems() | orderBy:'createdAt'" ng-click="main.activateItem(item)">
				<div class="grid" ng-class="{ purchased: item.purchased }">
					<div class="col-25">
						<input id="item_{{$index}}_quantity" class="quantity" type="number" pattern="[0-9]*" ng-model="item.quantity">
					</div>

					<div class="description col-75">
						<div ng-hide="item.manuallyAdded">{{item | ingredientDescription}}</div>
						<input id="item_{{$index}}_description" type="text" placeholder="Description" ng-model="item.description" ng-show="item.manuallyAdded">
					</div>
				</div>

				<div class="item-options" ng-show="main.activeItem == item">
					<button type="button" class="btn btn-link pull-right" ng-click="main.removeItem(item)">Remove</button>
				</div>
			</li>
		</ul>

		<div class="content-padded">
			<input type="submit" class="btn btn-primary btn-block" value="Save">
			<a ng-href="/plans/{{main.plan.id}}/list" class="btn btn-block">Cancel</a>
		</div>
	</form>
</div>
